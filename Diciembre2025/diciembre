CREATE PROCEDURE SP_SRI_RUC_Manabi_RUC
@NUMERO_RUC varchar(13)
AS
SELECT 
NUMERO_RUC, RAZON_SOCIAL,DESCRIPCION_CANTON_EST,DESCRIPCION_PARROQUIA_EST,NOMBRE_FANTASIA_COMERCIAL, ACTIVIDAD_ECONOMICA
FROM
	SRI_RUC_Manabi
	WHERE NUMERO_RUC =  @NUMERO_RUC
GO

CREATE PROCEDURE SP_SRI_RUC_Manabi_RAZON
@RAZON_SOCIAL varchar(100)
AS
SELECT 
NUMERO_RUC, RAZON_SOCIAL,DESCRIPCION_CANTON_EST,DESCRIPCION_PARROQUIA_EST,NOMBRE_FANTASIA_COMERCIAL, ACTIVIDAD_ECONOMICA
FROM
	SRI_RUC_Manabi
where RAZON_SOCIAL like @RAZON_SOCIAL
GO

CREATE PROCEDURE SP_SRI_RUC_Manabi
AS
SELECT  
NUMERO_RUC, RAZON_SOCIAL,DESCRIPCION_CANTON_EST,DESCRIPCION_PARROQUIA_EST,NOMBRE_FANTASIA_COMERCIAL, ACTIVIDAD_ECONOMICA
FROM
	SRI_RUC_Manabi order by RAZON_SOCIAL
GO




CREATE PROCEDURE SP_CORTE_FACTURACIONEMPRESA 
@codigod char(5),
@codigoe char(5),
@estab char(3),
@ptoemi char(3),
@codigof char(8)
AS
SELECT     
	dbo.INVENTARIO_CLIENTE.Cod_empre, dbo.INVENTARIO_CLIENTE.name_empre, 
	dbo.INVENTARIO_CLIENTE.plazo, dbo.INVENTARIO_CLIENTE.tipo_pre, 	dbo.INVENTARIO_CLIENTE.Impuesto,dbo.INVENTARIO_CLIENTE.Descuento as DescuentoP,
	dbo.INVENTARIO_CLIENTE.max_credi,dbo.FACTURA.identifica, dbo.factura.CCLIENTE AS Nro_Tribut , dbo.facturA.Tcliente AS nro_telefo,
	dbo.FACTURA.codigod,	dbo.FACTURA.codigoe,	dbo.FACTURA.estab,dbo.FACTURA.ptoemi,
	dbo.FACTURA.Codigof, dbo.FACTURA.NCliente, dbo.FACTURA.DCliente,  dbo.FACTURA.p_descto, dbo.FACTURA.total, dbo.FACTURA.estadoxml,dbo.FACTURA.correoxml,
	dbo.FACTURA.fecha_e,
	dbo.FACTURA.fecha_vence,
	dbo.FACTURA.Subtotal,
	dbo.FACTURA.Iva,
	dbo.FACTURA.Deuda,
	dbo.FACTURA.Pago,
	dbo.FACTURA.Referencia,
	dbo.FACTURA.NPedido, 
	dbo.FACTURA.tipo_mov,
	dbo.FACTURA.CCliente,
	dbo.FACTURA.Comprobante, 
	dbo.FACTURA.hora_e,
	dbo.FACTURA.descuento,
	dbo.FACTURA.SubTotalDoce, 
	dbo.FACTURA.SubTotalCero,
	dbo.FACTURA.SubTotalNOI,
	dbo.FACTURA.SubTotalEI,
	dbo.FACTURA.ValorSubtotal,
	dbo.FACTURA.TotalDescuento,
	dbo.FACTURA.Valor_IVA,
	dbo.FACTURA.Valor_ICE,
	dbo.FACTURA.Valor_IRBPNR,
	dbo.FACTURA.Propina,
	dbo.FACTURA.ValorTotal,

	dbo.INVENTARIO_ITEMS.cod_item as Id_Prod, dbo.INVENTARIO_ITEMS.des_item,

	dbo.ITEMFACTURA.cantidad_V, 
	dbo.ITEMFACTURA.precio_V, 
	dbo.ITEMFACTURA.stock_ex, 
	dbo.ITEMFACTURA.fecha, 
	dbo.ITEMFACTURA.abono,
	dbo.ITEMFACTURA.descuento as Descuentol,
	dbo.ITEMFACTURA.total_V,
	dbo.ITEMFACTURA.preciod, 
	dbo.ITEMFACTURA.iva_V, 
	dbo.ITEMFACTURA.Lote_codigo,
	dbo.ITEMFACTURA.ValorIVA as ValorIVAl,
	dbo.ITEMFACTURA.ValorICE as ValorICEl,
	dbo.ITEMFACTURA.ValorIRBPNR as ValorIRBPNRl,

	dbo.INVENTARIO_ITEMS.SRI_Impuesto_CodigoIVA,dbo.INVENTARIO_ITEMS.SRI_Tarifa_CodigoIVA,dbo.INVENTARIO_ITEMS.ImpuestoIVA,dbo.INVENTARIO_ITEMS.SRI_Impuesto_CodigoICE,
	dbo.INVENTARIO_ITEMS.SRI_Tarifa_CodigoICE,	dbo.INVENTARIO_ITEMS.ImpuestoICE,	dbo.INVENTARIO_ITEMS.SRI_Impuesto_CodigoIRBPNR,	dbo.INVENTARIO_ITEMS.SRI_Tarifa_CodigoIRBPNR,
	dbo.INVENTARIO_ITEMS.ImpuestoIRBPNR,dbo.INVENTARIO_ITEMS. prod_nega,	
	dbo.INVENTARIO_VENDEDOR.vendedor_nombre

FROM    
	dbo.INVENTARIO_CLIENTE,dbo.factura,dbo.ITEMFACTURA,dbo.INVENTARIO_ITEMS,INVENTARIO_VENDEDOR  
	where
	dbo.factura.codigof=dbo.Itemfactura.id_fact
	AND dbo.factura.codigof=@codigof
	AND dbo.Itemfactura.id_fact=@codigof
	and dbo.factura.id_cliente=dbo.Itemfactura.codigoa
	and dbo.factura.Codigod=dbo.Itemfactura.codigod
	and dbo.factura.Codigoe=dbo.Itemfactura.codigoe
	and dbo.INVENTARIO_CLIENTE.Cod_empre=dbo.factura.id_cliente
	and dbo.INVENTARIO_CLIENTE.Codigod=dbo.factura.Codigod
	and dbo.INVENTARIO_CLIENTE.Codigoe=dbo.factura.Codigoe
	and dbo.INVENTARIO_ITEMS.cod_item=dbo.ITEMFACTURA.id_prod
	and dbo.INVENTARIO_ITEMS.codigod=dbo.ITEMFACTURA.codigod
	and dbo.INVENTARIO_ITEMS.codigoe=dbo.ITEMFACTURA.codigoe
	and (dbo.Inventario_Cliente.activo = 1) 
	AND (dbo.FACTURA.Activo = 1) 
	and (dbo.Inventario_Items.activo=1) 
	AND (dbo.itemFACTURA.Activo = 1)
	AND dbo.Inventario_Cliente.CODIGOD=@codigod 
	AND dbo.Inventario_Cliente.CODIGOE=@codigoe
	AND dbo.FACTURA.CODIGOD=@codigod 
	AND dbo.FACTURA.CODIGOE=@codigoe	
	and dbo.FACTURA.estab=@estab 
	and dbo.FACTURA.ptoemi=@ptoemi
	AND dbo.ITEMFACTURA.CODIGOD=@codigod 
	AND dbo.ITEMFACTURA.CODIGOE=@codigoe 
	and  dbo.ITEMFACTURA.estab=@estab 
	and  dbo.ITEMFACTURA.ptoemi=@ptoemi
	AND dbo.Inventario_Items.CODIGOD=@codigod 
	AND dbo.Inventario_Items.CODIGOE=@codigoe
	and INVENTARIO_VENDEDOR.codigoe=@codigoe 
	and INVENTARIO_VENDEDOR.codigod=@codigod
	and INVENTARIO_CLIENTE.codigoe=INVENTARIO_VENDEDOR.codigoe 
	and INVENTARIO_CLIENTE.codigod=INVENTARIO_VENDEDOR.codigod
	and INVENTARIO_VENDEDOR.Vendedor_Codigo=INVENTARIO_CLIENTE.Vendedor_Codigo
	and  INVENTARIO_VENDEDOR.Activo=1
	and INVENTARIO_CLIENTE.Activo=1
	order by dbo.FACTURA.Codigof
GO
